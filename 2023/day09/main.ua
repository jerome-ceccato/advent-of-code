Input ← ⊜(⊜⋕≠@ .)≠@\n.&fras"input"

AddDiffRow ← (
  .
  ⊢⇌
  ↻¯1.
  ↘1-
  ⊂:⊂∞
)
EndOfDiff ← (
  ⊢⇌
  ▽≠∞.
  ▽≠¯∞.
  ≠⧻:/+=0.
)
CollapseHistory ← /+⊢⇌⍉

Input
≡(□⍢AddDiffRow EndOfDiff¤)
/+≡(CollapseHistory°□)
